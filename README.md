# Ultimate Table Aggregator

Template workflow for parallel batch processing and aggregation of tabular formatted table files.

Inspired by real-life use cases.

This workflow will demonstrate methods of using Nextflow for large scale batch processing of tables or spreadsheets. The files may have been generated by some software, or sent to you by a client or collaborator who needs data from all tables condensed into a single table with some custom processing.

This workflow will:

- unzip an archive of a bunch a data that someone sent you

- save a list of the specific files to be processed

- apply some custom processing to each table; in this case, converting the table header into new columns

- aggregate all tables via 'smart' concatenation that matches and fills in missing fields

# Usage

First, clone this repo

```
git clone https://github.com/stevekm/ultimate-table-aggregator.git
cd ultimate-table-aggregator
```

Run the workflow with the included `Makefile`

```
make
```

## Input

Input data includes tables in the following format:

```
##foo=1
##bar=2
"Val1"	"Val2"	"Val3"
"aa"	"FF"	"890"
"bb"	"CC"	"21"
```

## Output

Output table will look like this:

```
Val1	Val2	Val3	foo	bar	Source	Val4	baz
aa	FF	890	1	2	Sample14-data.tsv	.	.
bb	CC	21	1	2	Sample14-data.tsv	.	.
dk	.	890	9	6	Sample6-data.tsv	z35	34
gh	.	21	9	6	Sample6-data.tsv	2m4	34
```

# Software

- GNU `make`, `bash`

- Java 8 (for Nextflow)
